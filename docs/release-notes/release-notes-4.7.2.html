<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NavCoin v4.7.2 Release Notes &mdash; NavCoin Core Documentation  documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="canonical" href="http://docs.nav.community/release-notes/release-notes-4.7.2.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NavCoin v4.7.3 Release Notes" href="release-notes-4.7.3.html" />
    <link rel="prev" title="NavCoin v4.7.1 Release Notes" href="release-notes-4.7.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> NavCoin Core Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get.html">How to get NavCoin Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use.html">How to use NavCoin Core</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../options.html">Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">RPC methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network.html">Network parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../base58check.html">Base58Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../payloads.html">Address Payloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serialization.html">Serialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opcodes.html">Script Opcodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard_script.html">Standard Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard_script.html#dao-special-scripts">DAO Special Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_tx.html">Special Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blsct.html">BLSCT Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coldstaking.html">Cold Staking</a></li>
</ul>
<p class="caption"><span class="caption-text">Release notes:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.0.0.html">NavCoin v4.0.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.2.0.html">NavCoin v4.2.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.2.1.html">NavCoin v4.2.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.3.0.html">NavCoin v4.3.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.4.0.html">NavCoin v4.4.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.5.0.html">NavCoin v4.5.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.5.0-additional-testing-notes/modified-coldstaking-client-notes-4.5.0.html">Modified client testing for cold-staking v4.5.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.5.1.html">NavCoin v4.5.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.5.2.html">NavCoin v4.5.2 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.6.0.html">NavCoin v4.6.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.7.0.html">NavCoin v4.7.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.7.1.html">NavCoin v4.7.1 Release Notes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NavCoin v4.7.2 Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fix-for-verify-chain">Fix for Verify Chain</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#important">IMPORTANT</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cfunddb-extra-log-and-ensure-read-before-modify">CFundDB extra log and ensure read before modify</a></li>
<li class="toctree-l2"><a class="reference internal" href="#restart-testnet">Restart testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#full-list-of-merged-prs">Full list of Merged PRs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-4.7.3.html">NavCoin v4.7.3 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-5.0.0.html">NavCoin v5.0.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-5.0.1.html">NavCoin v5.0.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes-6.0.html">NavCoin v6.0 Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NavCoin Core Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>NavCoin v4.7.2 Release Notes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/release-notes/release-notes-4.7.2.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="navcoin-v4-7-2-release-notes">
<h1>NavCoin v4.7.2 Release Notes<a class="headerlink" href="#navcoin-v4-7-2-release-notes" title="Permalink to this headline"></a></h1>
<div class="section" id="fix-for-verify-chain">
<h2>Fix for Verify Chain<a class="headerlink" href="#fix-for-verify-chain" title="Permalink to this headline"></a></h2>
<p>&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/634">Pull Request 634</a>&gt;
&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/049978e246de960370f629fa38a6509fad0cf5c8">Commit 049978e</a>&gt;</p>
<p>This patch fixes <a class="reference external" href="https://github.com/navcoin/navcoin-core/issues/630">Issue 630</a> and introduces several important changes.</p>
<ul class="simple">
<li><p>New RPC command <code class="docutils literal notranslate"><span class="pre">getcfunddbstatehash</span></code> covered by functional test <code class="docutils literal notranslate"><span class="pre">cfunddb-statehash.py</span></code></p></li>
<li><p>New state for payment requests <code class="docutils literal notranslate"><span class="pre">6</span></code> when those are paid.</p></li>
<li><p>The payment request parameter paidOnBlock is substituted by <code class="docutils literal notranslate"><span class="pre">stateChangedOnBlock</span></code> when state is <code class="docutils literal notranslate"><span class="pre">6</span></code></p></li>
<li><p>New structure for storing the state history of CFundDB entries. Those are stored in a map associating blockhash and state, allowing to directly revert state transitions when reorganizations are seen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verifychain</span></code> now checks for the consistency of the CFundDB state hash when level 4 is specified.</p></li>
</ul>
<div class="section" id="important">
<h3>IMPORTANT<a class="headerlink" href="#important" title="Permalink to this headline"></a></h3>
<p>This set of changes will require older clients to reindex on launch, keeping the node offline for some hours at best. In order to reduce downtime, node operators can proceed as follows if needed:</p>
<ul class="simple">
<li><p>Close node with old version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">/tmp/reindexdata;</span> <span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">&lt;data_folder&gt;/blocks</span> <span class="pre">/tmp/reindexdata/;</span> <span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">&lt;data_folder&gt;/chainstate</span> <span class="pre">/tmp/reindexdata/</span></code></p></li>
<li><p>Reopen node with old version. It will be again online</p></li>
<li><p>Launch in parallel a second instance of the node, this time using the new version with the parameters <code class="docutils literal notranslate"><span class="pre">-reindex</span> <span class="pre">-datadir=/tmp/reindexdata/</span></code></p></li>
<li><p>Once the reindex finishes, close both nodes and copy back the reindexed data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">&lt;data_folder&gt;/blocks</span> <span class="pre">&lt;data_folder&gt;/chainstate;</span> <span class="pre">cp</span> <span class="pre">-rf</span> <span class="pre">/tmp/reindexdata/*</span> <span class="pre">&lt;data_folder&gt;</span></code></p></li>
<li><p>Relaunch new version of the node.</p></li>
</ul>
</div>
</div>
<div class="section" id="cfunddb-extra-log-and-ensure-read-before-modify">
<h2>CFundDB extra log and ensure read before modify<a class="headerlink" href="#cfunddb-extra-log-and-ensure-read-before-modify" title="Permalink to this headline"></a></h2>
<p>&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/622">Pull Request 622</a>&gt;
&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/37fa72e386ad3daff58b92ed7dda1a9b0676a43b">Commit 37fa72e</a>&gt;</p>
<p>This PR adds extra log for all the modifications of the CFundDB and ensures entries are read in the memory cache before being modified.</p>
</div>
<div class="section" id="restart-testnet">
<h2>Restart testnet<a class="headerlink" href="#restart-testnet" title="Permalink to this headline"></a></h2>
<p>&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/628">Pull Request 628</a>&gt;
&lt;<a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/b8ed0180a2deaf616c8e6b38aec42385f0a73879">Commit b8ed018</a>&gt;</p>
<p>This pull request starts a new NavCoin testnet. If you’re running a testnet node you will need to will need to wipe your testnet data directory and connect to the new testnet nodes. A list of some of the testnet nodes operated by NavCoin Core developers can be found on <a class="reference external" href="https://github.com/navcoin/navcoin-core/issues/626">Issue 626</a>. If you need testnet coins or want to be added to the list of nodes, please comment on the issue or join the #dev-testnet channel in <a class="reference external" href="https://discord.gg/y4Vu9jw">Discord</a>.</p>
</div>
<div class="section" id="full-list-of-merged-prs">
<h2>Full list of Merged PRs<a class="headerlink" href="#full-list-of-merged-prs" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/652"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">652</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/0cde80954fd2bdca1859c0e90dfcc3243dba6c61"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">0cde809</span></code></a> Remove new version popup</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/651"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">651</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/95b524eefbfb87190a9038397d6c6a2c8ea081c9"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">95b524e</span></code></a> Update translations</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/648"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">648</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/09f053152761aa254dae27a9da3e338e2e31e671"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">09f0531</span></code></a> Update QT strings</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/647"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">647</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/0eafc3b404503c985993a7069bc8cb160100911d"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">0eafc3b</span></code></a> Reactivate CFund</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/641"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">641</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/494d4e2d598ad114c407d609d7b8141e4ab54f50"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">494d4e2</span></code></a> Add extra stats to getblock</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/634"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">634</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/049978e246de960370f629fa38a6509fad0cf5c8"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">049978e</span></code></a> Fix for verifychain</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/644"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">644</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/5d59483c50d985d3053299febe941dcfb447be46"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">5d59483</span></code></a> Adds proposalHash to the RPC getpaymentrequest</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/643"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">643</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/d501c89ea412760de2074d8706fc1684d42d1445"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">d501c89</span></code></a> CPaymentRequest fields incorrect in diff</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/638"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">638</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/8131b4236054c5ee57e253ce75dc77a9992a6bed"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">8131b42</span></code></a> Fixed freezing GUI on reindex</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/632"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">632</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/2ad3391e5195720af2d288f923081c24df023d99"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">2ad3391</span></code></a> Fix reference to chain tip</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/629"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">629</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/2a6c64f87858d3452b9b830a0853e993379449d6"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">2a6c64f</span></code></a> Seed nodes</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/637"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">637</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/ad883cdfa1a1e478f6db30beb41511e97a37bb28"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">ad883cd</span></code></a> Set DEFAULT_SCRIPTCHECK_THREADS to auto</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/624"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">624</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/7058550da5fe3a2f6ad5493fab763cea285f1a05"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">7058550</span></code></a> Updates to make the wallet.py and stakeimmaturebalance.py test more reliable</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/636"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">636</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/e6f3c23f41d5a3a4228f95bd9d67c6acff81f1a3"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">e6f3c23</span></code></a> Only count stakes in main chain</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/633"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">633</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/bfe90717910cfaa49562efdb14259deb6b208dac"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">bfe9071</span></code></a> Add second dns seeder</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/622"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">622</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/37fa72e386ad3daff58b92ed7dda1a9b0676a43b"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">37fa72e</span></code></a> CFundDB extra log and ensure read before modify</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/628"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">628</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/b8ed0180a2deaf616c8e6b38aec42385f0a73879"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">b8ed018</span></code></a> Restart testnet</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/623"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">623</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/09ea936f9bd1bb6557d541344345889252d6aef9"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">09ea936</span></code></a> Disable CFund client functionality</p></li>
<li><p><a class="reference external" href="https://github.com/navcoin/navcoin-core/pull/609"><code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">Request</span> <span class="pre">609</span></code></a> <a class="reference external" href="https://github.com/navcoin/navcoin-core/commit/1e73c05b17bc812057a866b414d66573211ad755"><code class="docutils literal notranslate"><span class="pre">Commit</span> <span class="pre">1e73c05</span></code></a> Added clearer error messages for the nRequest amount validation</p></li>
</ul>
<p>For additional information about new features, check <a class="reference external" href="https://navcoin.org/en/notices/">https://navcoin.org/en/notices/</a></p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="release-notes-4.7.1.html" class="btn btn-neutral float-left" title="NavCoin v4.7.1 Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="release-notes-4.7.3.html" class="btn btn-neutral float-right" title="NavCoin v4.7.3 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, NavCoin Core Dev Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>